class EventEmitter{constructor(){this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>this.off(e,t)}off(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!==t))}emit(t,s){this.events[t]&&this.events[t].forEach(e=>{try{e(s)}catch(e){console.error(`Error in event ${t}:`,e)}})}once(t,s){let n=e=>{s(e),this.off(t,n)};this.on(t,n)}clear(e){e?delete this.events[e]:this.events={}}}window.eventBus=new EventEmitter;