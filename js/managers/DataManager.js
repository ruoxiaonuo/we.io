class DataManager{constructor(){this.githubToken=Utils.storage.get("githubToken"),this.githubRepo=Utils.storage.get("githubRepo")}async syncToGithub(t){try{if(!this.githubToken||!this.githubRepo)throw new Error("请先配置 GitHub 信息");var e=btoa(JSON.stringify(t,null,2)),i=(new Date).toISOString(),s=`data/memories/${i}.json`;if((await fetch(`https://api.github.com/repos/${this.githubRepo}/contents/`+s,{method:"PUT",headers:{Authorization:"token "+this.githubToken,"Content-Type":"application/json"},body:JSON.stringify({message:"Add memory: "+i,content:e})})).ok)return UIManager.showToast("同步成功","success"),!0;throw new Error("同步到 GitHub 失败")}catch(t){return Utils.handleError(t),!1}}async saveMemory(t){try{var e=Utils.storage.get(CONFIG.STORAGE_KEYS.MEMORIES,[]);return e.unshift(t),Utils.storage.set(CONFIG.STORAGE_KEYS.MEMORIES,e),await this.syncToGithub(t),!0}catch(t){return Utils.handleError(t),!1}}setGithubConfig(t,e){this.githubToken=t,this.githubRepo=e,Utils.storage.set("githubToken",t),Utils.storage.set("githubRepo",e)}}