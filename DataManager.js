class DataManager{static KEYS={MEMORIES:"memories",PHOTOS:"photos",FIGHTS:"fights",CALENDAR:"calendarEvents"};static save(t,r){try{var e=JSON.stringify(r);return localStorage.setItem(t,e),!0}catch(t){return console.error("数据保存失败:",t),UIManager.showToast("保存失败，请重试","error"),!1}}static load(t,r=null){try{var e=localStorage.getItem(t);return e?JSON.parse(e):r}catch(t){return console.error("数据读取失败:",t),UIManager.showToast("数据加载失败","error"),r}}static update(t,r){r=r(this.load(t,[]));return this.save(t,r)}static delete(t){try{return localStorage.removeItem(t),!0}catch(t){return console.error("数据删除失败:",t),!1}}static clear(){try{return localStorage.clear(),!0}catch(t){return console.error("数据清除失败:",t),!1}}static exportData(){let r={};Object.values(this.KEYS).forEach(t=>{r[t]=this.load(t)});var t=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),t=URL.createObjectURL(t),e=document.createElement("a");e.href=t,e.download=`our_memory_backup_${(new Date).toISOString().split("T")[0]}.json`,e.click(),URL.revokeObjectURL(t)}static async importData(t){try{var r=await t.text(),e=JSON.parse(r);if(this.validateImportData(e))return Object.entries(e).forEach(([t,r])=>{this.save(t,r)}),UIManager.showToast("数据导入成功","success"),!0;throw new Error("数据格式不正确")}catch(t){return console.error("数据导入失败:",t),UIManager.showToast("数据导入失败","error"),!1}}static validateImportData(r){return Object.values(this.KEYS).every(t=>t in r)}static async backupToCloud(){}static async restoreFromCloud(){}}