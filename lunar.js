class Lunar{constructor(){this.lunarInfo=[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448],this.solarTerms=["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],this.festivals={solar:{"01-01":"元旦","02-14":"情人节","03-08":"妇女节","03-12":"植树节","04-01":"愚人节","05-01":"劳动节","05-04":"青年节","06-01":"儿童节","07-01":"建党节","08-01":"建军节","09-10":"教师节","10-01":"国庆节","12-24":"平安夜","12-25":"圣诞节"},lunar:{"01-01":"春节","01-15":"元宵节","02-02":"龙抬头","05-05":"端午节","07-07":"七夕节","08-15":"中秋节","09-09":"重阳节","12-08":"腊八节","12-23":"小年","12-30":"除夕"}},this.Gan=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],this.Zhi=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],this.Animals=["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],this.lunarDays=["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十"],this.lunarMonths=["正","二","三","四","五","六","七","八","九","十","冬","腊"],this.termInfo=[0,21208,42467,63836,85337,107014,128867,150921,173149,195551,218072,240693,263343,285989,308563,331033,353350,375494,397447,419210,440795,462224,483532,504758],this.specialDates={solar:["02-29"],lunar:["10-18"]}}getLunarDate(t,a,r){if(t<1900||2100<t)return{year:"Unknown",month:"Unknown",day:"Unknown"};var e=new Date(1900,0,31),n=new Date(t,a-1,r);let s=Math.floor((n-e)/864e5),i=1900,h=0;for(;i<2101&&0<s;i++)h=this.getLunarYearDays(i),s-=h;s<0&&(s+=h,i--);let l=1,o=!1;var u=this.getLeapMonth(i);for(h=0;l<13&&0<s;l++)h=0<u&&l===u+1&&!o?(l--,o=!0,this.getLeapMonthDays(i)):this.getLunarMonthDays(i,l),o&&l===u+1&&(o=!1),s-=h;0===s&&0<u&&l===u+1&&(o?o=!1:(o=!0,l--)),s<0&&(s+=h,l--);n=s+1;return{year:this.getGanZhiYear(i),month:this.getLunarMonth(l,o),day:this.getLunarDay(n),festival:this.getLunarFestival(l,n),solarTerm:this.getSolarTerm(t,a,r)}}getLunarYearDays(a){let r=348;for(let t=32768;8<t;t>>=1)r+=this.lunarInfo[a-1900]&t?1:0;return r+this.getLeapMonthDays(a)}getLunarMonthDays(t,a){return this.lunarInfo[t-1900]&65536>>a?30:29}getLeapMonthDays(t){return this.getLeapMonth(t)?65536&this.lunarInfo[t-1900]?30:29:0}getLeapMonth(t){return 15&this.lunarInfo[t-1900]}getGanZhiYear(t){return this.Gan[(t-4)%10]+this.Zhi[(t-4)%12]+"年"}getLunarMonth(t,a){return(a?"闰":"")+this.lunarMonths[t-1]+"月"}getLunarDay(t){return this.lunarDays[t-1]}getSolarTerm(t,a,r){var e=new Date(1900,0,6,2,5),t=new Date(t,a-1,r),n=Math.floor((t-e)/864e5);for(let t=0;t<24;t++)if(n===this.termInfo[t])return this.solarTerms[t];return""}getLunarFestival(t,a){t=String(t).padStart(2,"0")+"-"+String(a).padStart(2,"0");return this.festivals.lunar[t]||""}getAllFestivals(t,a,r,e){var n=parseInt(e.month),e=parseInt(e.day),n=String(n).padStart(2,"0")+"-"+String(e).padStart(2,"0"),e=String(a).padStart(2,"0")+"-"+String(r).padStart(2,"0"),s=[],e=(this.festivals.solar[e]&&s.push(this.festivals.solar[e]),this.festivals.lunar[n]&&s.push(this.festivals.lunar[n]),this.getSolarTerm(t,a,r));return e&&s.push(e),s}isLeapYear(t){return t%4==0&&t%100!=0||t%400==0}}